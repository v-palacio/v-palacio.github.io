{% include base_path %}

<!-- start custom head snippets -->
<link href="https://fonts.googleapis.com/css2?family=Bitter:ital,wght@0,100..900;1,100..900&family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">

<style>
/* Custom font weight adjustments */
body {
  font-weight: 400;
}

h1, h2, h3, h4, h5, h6 {
  font-weight: 500;
}

/* Ensure proper font loading */
@font-face {
  font-family: 'Figtree';
  font-display: swap;
}

@font-face {
  font-family: 'Bitter';
  font-display: swap;
}
</style>
<!-- Support for Academicons -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css"/>

<!-- favicon from https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_academic-progressive.svg -->
<link rel="apple-touch-icon" sizes="180x180" href="{{ base_path }}/images/apple-touch-icon-180x180.png"/>
<link rel="icon" type="image/svg+xml" href="{{ base_path }}/images/favicon.svg"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-32x32.png" sizes="32x32"/>
<link rel="icon" type="image/png" href="{{ base_path }}/images/favicon-192x192.png" sizes="192x192"/>
<link rel="manifest" href="{{ base_path }}/images/manifest.json"/>
<link rel="icon" href="/images/favicon.ico"/>
<meta name="theme-color" content="#ffffff"/>

<!-- Auto-open external links in new tabs -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Find all external links (excluding GitHub Pages and localhost)
    const externalLinks = document.querySelectorAll('a[href^="http://"]:not([href*="localhost"]):not([href*="127.0.0.1"]):not([href*="github.io"]), a[href^="https://"]:not([href*="localhost"]):not([href*="127.0.0.1"]):not([href*="github.io"])');
    
    // Add target="_blank" and rel="noopener noreferrer" to external links
    externalLinks.forEach(function(link) {
        link.setAttribute('target', '_blank');
        link.setAttribute('rel', 'noopener noreferrer');
    });

    // Navigation scroll detection for fade effect
    const visibleLinks = document.querySelector('.visible-links');
    
    if (visibleLinks) {
        // Create fade element dynamically
        const fadeElement = document.createElement('div');
        fadeElement.className = 'navigation-fade';
        fadeElement.style.cssText = `
            position: fixed;
            top: 0;
            right: 0;
            width: 50px;
            background: linear-gradient(to left, var(--global-bg-color) 0%, rgba(0,0,0,0.1) 50%, transparent 100%);
            pointer-events: none;
            z-index: 1000;
            box-shadow: inset -20px 0 20px -10px rgba(0,0,0,0.1);
            opacity: 0;
            transition: opacity 0.3s ease, height 0.3s ease;
        `;
        document.body.appendChild(fadeElement);
        
        // Function to update fade height based on masthead
        function updateFadeHeight() {
            const masthead = document.querySelector('.masthead');
            if (masthead && fadeElement) {
                const mastheadHeight = masthead.offsetHeight;
                fadeElement.style.height = mastheadHeight + 'px';
            }
        }
        
        // Update fade height on load and resize
        updateFadeHeight();
        window.addEventListener('resize', updateFadeHeight);
        
        visibleLinks.addEventListener('scroll', function() {
            const scrollLeft = this.scrollLeft;
            const scrollWidth = this.scrollWidth;
            const clientWidth = this.clientWidth;
            
            // Show/hide fade based on scroll
            if (scrollLeft > 0 || scrollWidth > clientWidth) {
                fadeElement.style.opacity = '1';
            } else {
                fadeElement.style.opacity = '0';
            }
        });
    }

});
</script>

<!-- end custom head snippets -->
